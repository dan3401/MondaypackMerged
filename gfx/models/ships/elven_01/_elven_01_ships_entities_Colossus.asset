##################################
###       ELVEN COLOSSUS       ###
##################################

@frame_scale = 1.0
@frame_size = 20

##########################
## MAIN COLOSSUS ENTITY ##
##########################

entity = {
	name = "elven_01_colossus_entity"
	pdxmesh = "elven_01_colossus_mesh"
	
	default_state = "idle"
	
	# IDLE STATE WHEN IDLE/MOVING #
	state = { name = "idle" animation = "idle" looping = no next_state = "idle" animation_blend_time = 5
		chance = {
			if_current_state = {
				"idle" = 100
				"moving" = 100
				"death" = 0
				"working" = 100
				"working_looping" = 0
			}
		}
		start_event = { trigger_once = yes sound = { soundeffect = "fallen_empire_colossus_idle" } }
		start_event = { trigger_once = yes sound = { soundeffect = "avian_colossus_idle_layer" } }
		
		event = { time = 0 node = "light_locator_01" particle = "elven_ship_light_viola_effect" keep_particle = yes trigger_once = yes }
		event = { time = 0 node = "light_locator_02" particle = "elven_ship_light_viola_effect" keep_particle = yes trigger_once = yes }
		event = { time = 0 node = "light_locator_03" particle = "elven_ship_light_viola_effect" keep_particle = yes trigger_once = yes }
		event = { time = 0 node = "light_locator_04" particle = "elven_ship_light_viola_effect" keep_particle = yes trigger_once = yes }
		
		event = { time = 0 node = "large_engine_01" particle = "elven_01_5_0_ship_exhaust_moving_particle" keep_particle = yes trigger_once = yes }
		event = { time = 0 node = "large_engine_02" particle = "elven_01_5_0_ship_exhaust_moving_particle" keep_particle = yes trigger_once = yes }
		event = { time = 0 node = "small_engine_01" particle = "elven_01_3_0_ship_exhaust_moving_particle" keep_particle = yes trigger_once = yes }
		event = { time = 0 node = "small_engine_02" particle = "elven_01_3_0_ship_exhaust_moving_particle" keep_particle = yes trigger_once = yes }
		event = { time = 0 node = "small_engine_03" particle = "elven_01_3_0_ship_exhaust_moving_particle" keep_particle = yes trigger_once = yes }
		event = { time = 0 node = "small_engine_04" particle = "elven_01_3_0_ship_exhaust_moving_particle" keep_particle = yes trigger_once = yes }
	}
	
	# IDLE WHEN GOING FROM OPENED TO IDLE #
	state = { name = "idle" animation = "closing" looping = no next_state = "idle" 
		chance = {
			if_current_state = {
				"idle" = 0
				"moving" = 0
				"death" = 0
				"working" = 0
				"working_looping" = 100
			}
		}
		event = { trigger_once = yes sound = { soundeffect = "fallen_empire_colossus_closing" stop_on_state_change = yes } }
		
		event = { time = 0 node = "light_locator_01" particle = "elven_ship_light_viola_effect" keep_particle = yes trigger_once = yes }
		event = { time = 0 node = "light_locator_02" particle = "elven_ship_light_viola_effect" keep_particle = yes trigger_once = yes }
		event = { time = 0 node = "light_locator_03" particle = "elven_ship_light_viola_effect" keep_particle = yes trigger_once = yes }
		event = { time = 0 node = "light_locator_04" particle = "elven_ship_light_viola_effect" keep_particle = yes trigger_once = yes }
		
		event = { time = 0 node = "large_engine_01" particle = "elven_01_5_0_ship_exhaust_moving_particle" keep_particle = yes trigger_once = yes }
		event = { time = 0 node = "large_engine_02" particle = "elven_01_5_0_ship_exhaust_moving_particle" keep_particle = yes trigger_once = yes }
		event = { time = 0 node = "small_engine_01" particle = "elven_01_3_0_ship_exhaust_moving_particle" keep_particle = yes trigger_once = yes }
		event = { time = 0 node = "small_engine_02" particle = "elven_01_3_0_ship_exhaust_moving_particle" keep_particle = yes trigger_once = yes }
		event = { time = 0 node = "small_engine_03" particle = "elven_01_3_0_ship_exhaust_moving_particle" keep_particle = yes trigger_once = yes }
		event = { time = 0 node = "small_engine_04" particle = "elven_01_3_0_ship_exhaust_moving_particle" keep_particle = yes trigger_once = yes }
	}
	
	# MOVING STATE IF GOING FROM IDLE/MOVING #
	state = { name = "moving" animation = "idle" looping = yes next_state = "moving"
		chance = {
			if_current_state = {
				"idle" = 100
				"moving" = 100
				"death" = 0
				"working" = 100
				"working_looping" = 0
			}
		}
		event = { trigger_once = yes sound = { soundeffect = "moving_out_colossus" stop_on_state_change = yes } }
		
		event = { time = 0 node = "light_locator_01" particle = "elven_ship_light_viola_effect" keep_particle = yes trigger_once = yes }
		event = { time = 0 node = "light_locator_02" particle = "elven_ship_light_viola_effect" keep_particle = yes trigger_once = yes }
		event = { time = 0 node = "light_locator_03" particle = "elven_ship_light_viola_effect" keep_particle = yes trigger_once = yes }
		event = { time = 0 node = "light_locator_04" particle = "elven_ship_light_viola_effect" keep_particle = yes trigger_once = yes }
		
		event = { time = 0 node = "large_engine_01" particle = "elven_01_5_0_ship_exhaust_moving_particle" keep_particle = yes trigger_once = yes }
		event = { time = 0 node = "large_engine_02" particle = "elven_01_5_0_ship_exhaust_moving_particle" keep_particle = yes trigger_once = yes }
		event = { time = 0 node = "small_engine_01" particle = "elven_01_3_0_ship_exhaust_moving_particle" keep_particle = yes trigger_once = yes }
		event = { time = 0 node = "small_engine_02" particle = "elven_01_3_0_ship_exhaust_moving_particle" keep_particle = yes trigger_once = yes }
		event = { time = 0 node = "small_engine_03" particle = "elven_01_3_0_ship_exhaust_moving_particle" keep_particle = yes trigger_once = yes }
		event = { time = 0 node = "small_engine_04" particle = "elven_01_3_0_ship_exhaust_moving_particle" keep_particle = yes trigger_once = yes }
	}
	
	# MOVING STATE IF GOING FROM OPEN/WORKING, USES CLOSING ANIMATION #
	state = { name = "moving" animation = "closing" looping = no next_state = "moving"
		chance = {
			if_current_state = {
				"idle" = 0
				"moving" = 0
				"death" = 0
				"working" = 0
				"working_looping" = 100
			}
		}
		event = { trigger_once = yes sound = { soundeffect = "fallen_empire_colossus_closing" stop_on_state_change = yes } }
		
		event = { time = 0 node = "light_locator_01" particle = "elven_ship_light_viola_effect" keep_particle = yes trigger_once = yes }
		event = { time = 0 node = "light_locator_02" particle = "elven_ship_light_viola_effect" keep_particle = yes trigger_once = yes }
		event = { time = 0 node = "light_locator_03" particle = "elven_ship_light_viola_effect" keep_particle = yes trigger_once = yes }
		event = { time = 0 node = "light_locator_04" particle = "elven_ship_light_viola_effect" keep_particle = yes trigger_once = yes }
		
		event = { time = 0 node = "large_engine_01" particle = "elven_01_5_0_ship_exhaust_moving_particle" keep_particle = yes trigger_once = yes }
		event = { time = 0 node = "large_engine_02" particle = "elven_01_5_0_ship_exhaust_moving_particle" keep_particle = yes trigger_once = yes }
		event = { time = 0 node = "small_engine_01" particle = "elven_01_3_0_ship_exhaust_moving_particle" keep_particle = yes trigger_once = yes }
		event = { time = 0 node = "small_engine_02" particle = "elven_01_3_0_ship_exhaust_moving_particle" keep_particle = yes trigger_once = yes }
		event = { time = 0 node = "small_engine_03" particle = "elven_01_3_0_ship_exhaust_moving_particle" keep_particle = yes trigger_once = yes }
		event = { time = 0 node = "small_engine_04" particle = "elven_01_3_0_ship_exhaust_moving_particle" keep_particle = yes trigger_once = yes }
	}
	
	# OPENED STATE,  AFTER A PLANET ZONK #
	state = { name = "working_looping" animation = "open" 
		event = { time = 0	id = "beam_start" }
	
		event = { time = 0 node = "light_locator_01" particle = "elven_ship_light_viola_effect" keep_particle = yes trigger_once = yes }
		event = { time = 0 node = "light_locator_02" particle = "elven_ship_light_viola_effect" keep_particle = yes trigger_once = yes }
		event = { time = 0 node = "light_locator_03" particle = "elven_ship_light_viola_effect" keep_particle = yes trigger_once = yes }
		event = { time = 0 node = "light_locator_04" particle = "elven_ship_light_viola_effect" keep_particle = yes trigger_once = yes }
	}
	
	# OPENING STATE, GOES INTO "WORKING_LOOPING" STATE WHEN DONE #
	state = { name = "working" animation = "opening" looping = no next_state = "working_looping" 
		event = { trigger_once = yes sound = { soundeffect = "fallen_empire_colossus_opening" stop_on_state_change = yes } }
	
		event = { time = 1000 id = "beam_start" } #will never fire, but lets the game know that an event with this ID exists
	
		event = { time = 0 node = "light_locator_01" particle = "elven_ship_light_viola_effect" keep_particle = yes trigger_once = yes }
		event = { time = 0 node = "light_locator_02" particle = "elven_ship_light_viola_effect" keep_particle = yes trigger_once = yes }
		event = { time = 0 node = "light_locator_03" particle = "elven_ship_light_viola_effect" keep_particle = yes trigger_once = yes }
		event = { time = 0 node = "light_locator_04" particle = "elven_ship_light_viola_effect" keep_particle = yes trigger_once = yes }
	}
	
	# CLOSED DEATH STATE #
	state = { name = "death" animation = "closed_death" looping = no
		chance = {
			if_current_state = {
				"idle" = 100
				"moving" = 100
				"death" = 0
				"working" = 0
				"working_looping" = 0
			}
		}
		event = { trigger_once = yes sound = { soundeffect = "fallen_empire_colossus_death" stop_on_state_change = yes } }
		
		event = { time = 1.0 node = "explosion_locator_01" particle = "elven_01_large_ship_explosion_particle" }
		event = { time = 1.0 node = "explosion_locator_01" particle = "ship_burn_particle" keep_particle = yes trigger_once = yes }
		event = { time = 2.5 node = "explosion_locator_02" particle = "elven_01_large_ship_explosion_particle" }
		event = { time = 2.5 node = "explosion_locator_02" particle = "ship_burn_particle" keep_particle = yes trigger_once = yes }
		event = { time = 4.0 node = "explosion_locator_03" particle = "elven_01_large_ship_explosion_particle" }
		event = { time = 4.0 node = "explosion_locator_03" particle = "ship_burn_particle" keep_particle = yes trigger_once = yes }
		event = { time = 5.5 node = "explosion_locator_04" particle = "elven_01_large_ship_explosion_particle" }
		event = { time = 5.5 node = "explosion_locator_04" particle = "ship_burn_particle" keep_particle = yes trigger_once = yes }
		event = { time = 7.5 node = "explosion_locator_01" particle = "elven_01_large_ship_explosion_particle" }
		event = { time = 9.0 node = "explosion_locator_02" particle = "elven_01_large_ship_explosion_particle" }
		event = { time = 11.0 node = "explosion_locator_03" particle = "elven_01_large_ship_explosion_particle" }
		event = { time = 12.0 node = "center" particle = "elven_01_titan_explosion_particle" sound = { soundeffect = ship_destroyed } }
	}
	
	# OPENED DEATH STATE #
	state = { name = "death" animation = "opened_death" looping = no animation_blend_time = 2
		chance = {
			if_current_state = {
				"idle" = 0
				"moving" = 0
				"death" = 0
				"working" = 100
				"working_looping" = 100
			}
		}
		event = { trigger_once = yes sound = { soundeffect = "fallen_empire_colossus_death" stop_on_state_change = yes } }
		
		event = { time = 1.0 node = "explosion_locator_01" particle = "elven_01_large_ship_explosion_particle" }
		event = { time = 1.0 node = "explosion_locator_01" particle = "ship_burn_particle" keep_particle = yes trigger_once = yes }
		event = { time = 2.5 node = "explosion_locator_02" particle = "elven_01_large_ship_explosion_particle" }
		event = { time = 2.5 node = "explosion_locator_02" particle = "ship_burn_particle" keep_particle = yes trigger_once = yes }
		event = { time = 4.0 node = "explosion_locator_03" particle = "elven_01_large_ship_explosion_particle" }
		event = { time = 4.0 node = "explosion_locator_03" particle = "ship_burn_particle" keep_particle = yes trigger_once = yes }
		event = { time = 5.5 node = "explosion_locator_04" particle = "elven_01_large_ship_explosion_particle" }
		event = { time = 5.5 node = "explosion_locator_04" particle = "ship_burn_particle" keep_particle = yes trigger_once = yes }
		event = { time = 7.5 node = "explosion_locator_01" particle = "elven_01_large_ship_explosion_particle" }
		event = { time = 9.5 node = "explosion_locator_02" particle = "elven_01_large_ship_explosion_particle" }
		event = { time = 11.5 node = "explosion_locator_03" particle = "elven_01_large_ship_explosion_particle" }
		event = { time = 13.5 node = "explosion_locator_04" particle = "elven_01_large_ship_explosion_particle" }
		event = { time = 15.0 node = "explosion_locator_01" particle = "elven_01_large_ship_explosion_particle" }
		event = { time = 16.5 node = "explosion_locator_02" particle = "elven_01_large_ship_explosion_particle" }
		event = { time = 18.0 node = "explosion_locator_03" particle = "elven_01_large_ship_explosion_particle" }
		event = { time = 19.5 node = "explosion_locator_04" particle = "elven_01_large_ship_explosion_particle" }
		event = { time = 24.0 node = "center" particle = "elven_01_titan_explosion_particle" sound = { soundeffect = ship_destroyed } }
	}
	
	scale = @frame_scale
	
	game_data = {
		size = @frame_size
	}
	
	## For the hard-coded attaching of "elven_01_colossus_ship_entity"
	locator = { name = "frame_ship" position = { 0 0 0 } }
}

###########################
## EMPTY COLOSSUS ENTITY ##
###########################
## NOTE: This is hard coded (I think) to attach to "frame_ship" on "elven_01_colossus_entity". The main gun is fired from "planet_killer_gun_01", so we attach here at the same location (from Maya) it would be when fully deployed.

entity = {
	name = "elven_01_colossus_ship_entity"
	pdxmesh = "elven_01_empty_mesh"
	
	locator = { name = "planet_killer_gun_01" position = { 0 2.625 0 } }
}

#########################
## COLOSSUS ANIMATIONS ##
#########################

animation = {
	name = "elven_01_colossus_idle_animation"
	file = "elven_01_colossus_idle.anim"
}

animation = {
	name = "elven_01_colossus_closed_death_animation"
	file = "elven_01_colossus_closed_death.anim"
}

animation = {
	name = "elven_01_colossus_opening_animation"
	file = "elven_01_colossus_opening.anim"
}

animation = {
	name = "elven_01_colossus_open_animation"
	file = "elven_01_colossus_open.anim"
}

animation = {
	name = "elven_01_colossus_opened_death_animation"
	file = "elven_01_colossus_opened_death.anim"
}

animation = {
	name = "elven_01_colossus_closing_animation"
	file = "elven_01_colossus_closing.anim"
}


