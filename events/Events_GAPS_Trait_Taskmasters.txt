namespace = Events_GAPS_Traits_Taskmasters


#CORE EVENT
planet_event = {
	id = Events_GAPS_Traits_Taskmasters.10
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		set_variable = { which = "Planet_Variable_GAPS_Num_Taskmasters_Pops" value = 0 }
		every_deposit = {
			limit = { is_deposit_type = Deposits_GAPS_Taskmasters }
			remove_deposit = yes
		}
		every_owned_pop = {
			limit = { has_job = yes has_job_category = ruler pop_has_trait = Trait_GAPS_Taskmasters }
			planet = { change_variable = { which = "Planet_Variable_GAPS_Num_Taskmasters_Pops" value = 1 } }
		}
		remove_modifier = Planet_Modifier_GAPS_Trait_Taskmasters
		if = {
			limit = { any_owned_pop = { pop_has_trait = Trait_GAPS_Taskmasters } }
			add_modifier = {
				modifier = Planet_Modifier_GAPS_Trait_Taskmasters
				days = -1
				multiplier = Planet_Variable_GAPS_Num_Taskmasters_Pops
			}
		}
	}
}

#monthly pulse
country_event = {
	id = Events_GAPS_Traits_Taskmasters.20
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		any_owned_species = { has_trait = Trait_GAPS_Taskmasters }
	}
	immediate = {
		every_owned_planet = { 
			limit = { is_colony = yes }
			planet_event = { id = Events_GAPS_Traits_Taskmasters.10 days = 1 }
		}
	}
}

#game start
country_event = {
	id = Events_GAPS_Traits_Taskmasters.30
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		any_owned_species = { has_trait = Trait_GAPS_Taskmasters }
	}
	immediate = {
		every_owned_planet = { 
			limit = { is_colony = yes }
			planet_event = { id = Events_GAPS_Traits_Taskmasters.10 days = 1 }
		}
	}
}

