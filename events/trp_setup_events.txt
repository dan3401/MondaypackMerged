namespace = trp_setup_event

event = {
	id = trp_setup_event.1
	hide_window = yes
	is_triggered_only = yes
	
	option = {
		name = ia_setup_event.1.a
		add_tradition = trp_diplomacy_adopt
		add_tradition = trp_supremacy_adopt
		add_tradition = trp_expansion_adopt
		add_tradition = trp_production_adopt
		add_tradition = trp_discovery_adopt
		add_tradition = trp_commerce_adopt
		add_tradition = trp_prosperity_adopt
	}
}

country_event = { ##Ascension Perk System
	id = trp_setup_event.2
	hide_window = yes
	is_triggered_only = yes
	
	option = {
		name = ia_setup_event.2.a
		trigger = {
			AND = {
				has_country_flag = trp_ascension_perk_ready
				num_ascension_perks < 7
				NOT = { has_country_flag = trp_ascension_perk_complete }
			}
		}
		give_technology = { tech = repeatable_tech_trp_ap_1 message = no }
		remove_country_flag = trp_ascension_perk_ready
	}
	option = {
		name = ia_setup_event.2.b
		trigger = {
			NOT = { has_country_flag = trp_ascension_perk_ready }
			NOT = { has_country_flag = trp_ascension_perk_complete }
		}
		set_country_flag = trp_ascension_perk_ready
	}
	option = {
		name = ia_setup_event.2.c
		trigger = {
				num_ascension_perks > 7
		}
		remove_country_flag = trp_ascension_perk_ready
		set_country_flag = trp_ascension_perk_complete
	}
	option = {
		name = ia_setup_event.2.d
		trigger = {
				has_country_flag = trp_ascension_perk_complete
		}
	}
}
country_event = { ##Engineering Choice
	id = trp_setup_event.3
	hide_window = no
	is_triggered_only = yes
	title = "trp_setup.3.name"
	desc = "trp_setup.3.desc"
	picture = GFX_evt_engineering_research
	show_sound = event_ship_thrusters
	
	#fire_only_once = yes
	
	option = { ##Materials
		name = trp_setup_event.3.a
		set_country_flag = trp_engineering_c_materials
		custom_tooltip = "trp_engineering_c_materials_tt"
	}
	option = { ##Voidcraft
		name = trp_setup_event.3.b
		set_country_flag = trp_engineering_c_voidcraft
		custom_tooltip = "trp_engineering_c_voidcraft_tt"
	}
	option = { ##Propulsion
		name = trp_setup_event.3.c
		set_country_flag = trp_engineering_c_propulsion
		custom_tooltip = "trp_engineering_c_propulsion_tt"
	}
}
country_event = { ##Physics Choice
	id = trp_setup_event.4
	hide_window = no
	is_triggered_only = yes
	title = "trp_setup.4.name"
	desc = "trp_setup.4.desc"
	picture = GFX_evt_black_hole
	show_sound = event_laboratory_sound
	
	#fire_only_once = yes
	
	option = { ##Computing
		name = trp_setup_event.4.a
		set_country_flag = trp_physics_c_computing
		custom_tooltip = "trp_physics_c_computing_tt"
	}
	option = { ##Field Manipulation
		name = trp_setup_event.4.b
		set_country_flag = trp_physics_c_fieldm
		custom_tooltip = "trp_physics_c_fieldm_tt"
	}
	option = { ##Particles
		name = trp_setup_event.4.c
		set_country_flag = trp_physics_c_particles
		custom_tooltip = "trp_physics_c_particles_tt"
	}
}
country_event = { ##Society Choice
	id = trp_setup_event.5
	hide_window = no
	is_triggered_only = yes
	title = "trp_setup.5.name"
	desc = "trp_setup.5.desc"
	picture = GFX_evt_scanning_remains
	show_sound = event_primitive_civilization
	
	#fire_only_once = yes
	
	option = { ##Biology
		name = trp_setup_event.5.a
		set_country_flag = trp_society_c_biology
		custom_tooltip = "trp_society_c_biology_tt"
	}
	option = { ##Military Theory
		name = trp_setup_event.5.b
		set_country_flag = trp_society_c_miltheory
		custom_tooltip = "trp_society_c_miltheory_tt"
	}
	option = { ##New Worlds
		name = trp_setup_event.5.c
		set_country_flag = trp_society_c_newworlds
		custom_tooltip = "trp_society_c_newworlds_tt"
	}
}
country_event = { ##Enterprises Choice
	id = trp_setup_event.6
	hide_window = no
	is_triggered_only = yes
	title = "trp_setup.6.name"
	desc = "trp_setup.6.desc"
	picture = GFX_evt_cargoship_caravan
	show_sound = event_factions
	
	#fire_only_once = yes
	
	option = { ##Culture
		name = trp_setup_event.6.a
		set_country_flag = trp_enterprises_c_culture
		custom_tooltip = "trp_enterprises_c_culture_tt"
	}
	option = { ##Mercenaries
		name = trp_setup_event.6.b
		set_country_flag = trp_enterprises_c_mercenaries
		custom_tooltip = "trp_enterprises_c_mercenaries_tt"
	}
}
country_event = { ##Banking System
	id = trp_setup_event.7
	hide_window = yes
	is_triggered_only = yes
	trigger = {	
		has_tradition = trp_commerce_accumulation_a
	}
	immediate = {	
		if = {
			limit = {
				has_country_resource = { 
					type = energy 
					amount > 4999
				}
			}
			add_modifier = { modifier = trp_bank_system_1 days = -1 }
			remove_modifier = trp_bank_system_2
			remove_modifier = trp_bank_system_3
			remove_modifier = trp_bank_system_4
		}
		if = {
			limit = {
				has_country_resource = { 
					type = energy 
					amount > 9999
				}
			}
			add_modifier = { modifier = trp_bank_system_2 days = -1 }
			remove_modifier = trp_bank_system_1
			remove_modifier = trp_bank_system_3
			remove_modifier = trp_bank_system_4
		}
		if = {
			limit = {
				has_country_resource = { 
					type = energy 
					amount > 14999
				}
			}
			add_modifier = { modifier = trp_bank_system_3 days = -1 }
			remove_modifier = trp_bank_system_1
			remove_modifier = trp_bank_system_2
			remove_modifier = trp_bank_system_4
		}
		if = {
			limit = {
				has_country_resource = { 
					type = energy 
					amount > 19999
				}
			}
			add_modifier = { modifier = trp_bank_system_4 days = -1 }
			remove_modifier = trp_bank_system_1
			remove_modifier = trp_bank_system_2
			remove_modifier = trp_bank_system_3
		}
	}
}
country_event = { ##Tradition Supremacy Finisher Check
	id = trp_setup_event.8
	hide_window = yes
	is_triggered_only = yes

		trigger = {
				AND = {
					NOT = { has_tradition = trp_supremacy_finish }
					OR = {
						has_tradition = trp_supremacy_admirality_c
						has_swapped_tradition = trp_supremacy_admirality_c_gestalt
					}
					has_tradition = trp_supremacy_deterrence_c
					OR = {
						has_tradition = trp_supremacy_warfare_c
						has_swapped_tradition = trp_supremacy_warfare_c_gestalt
					}
					OR = {
						has_tradition = trp_supremacy_devastation_c
						has_swapped_tradition = trp_supremacy_devastation_a_pacifist
						has_swapped_tradition = trp_supremacy_devastation_a_already_arma
					}
					OR = {
						has_tradition = trp_supremacy_quantity_c
						has_tradition = trp_supremacy_quality_c
					}
				}
			}
			
		immediate = {	
			add_tradition = trp_supremacy_finish
		}
	}

country_event = { ##Tradition Expansion Finisher Check
	id = trp_setup_event.9
	hide_window = yes
	is_triggered_only = yes
	
		trigger = {
				AND = {
					NOT = { has_tradition = trp_expansion_finish }
					OR = {
						has_tradition = trp_expansion_population_c
						has_swapped_tradition = trp_expansion_population_c_hive
						has_swapped_tradition = trp_expansion_population_c_machine
					}
					has_tradition = trp_expansion_infrastructure_c
					has_tradition = trp_expansion_bureaucracy_c
					OR = {
						has_tradition = trp_expansion_foundation_c
						has_swapped_tradition = trp_expansion_foundation_c_habitat
						has_swapped_tradition = trp_expansion_foundation_c_ring
					}
					OR = {
						has_tradition = trp_expansion_colonization_c
						has_swapped_tradition = trp_expansion_colonization_c_machine
						has_swapped_tradition = trp_expansion_colonization_c_hive
						has_tradition = trp_expansion_space_race_c
					}
				}
			}
		immediate = {	
			add_tradition = trp_expansion_finish
		}
	}	

country_event = { ##Tradition Diplomacy Finisher Check
	id = trp_setup_event.10
	hide_window = yes
	is_triggered_only = yes
	
		trigger = {
				AND = {
					NOT = { has_tradition = trp_diplomacy_finish }
					has_tradition = trp_diplomacy_integration_c
					has_tradition = trp_diplomacy_association_c
					has_tradition = trp_diplomacy_administration_c
					has_tradition = trp_diplomacy_ideology_c
					OR = {
						has_tradition = tr_diplomacy_the_federation
						has_tradition = trp_diplomacy_government_c
					}
				}
			}
			
		immediate = {	
			add_tradition = trp_diplomacy_finish
		}
	}

country_event = { ##Tradition Discovery Finisher Check
	id = trp_setup_event.11
	hide_window = yes
	is_triggered_only = yes
	
		trigger = {
				AND = {
					NOT = { has_tradition = trp_discovery_finish }
					has_tradition = trp_discovery_academy_c
					OR = {
						has_tradition = trp_discovery_engineering_c
						has_swapped_tradition = trp_discovery_engineering_c_materials
						has_swapped_tradition = trp_discovery_engineering_c_voidcraft
						has_swapped_tradition = trp_discovery_engineering_c_propulsion
					}
					OR = {
						has_tradition = trp_discovery_physics_c
						has_swapped_tradition = trp_discovery_physics_c_machine
						has_swapped_tradition = trp_discovery_physics_c_computing
						has_swapped_tradition = trp_discovery_physics_c_fieldm
						has_swapped_tradition = trp_discovery_physics_c_particles
					}
					OR = {
						has_tradition = trp_discovery_society_c
						has_swapped_tradition = trp_discovery_society_c_biology
						has_swapped_tradition = trp_discovery_society_c_miltheory
						has_swapped_tradition = trp_discovery_society_c_newworlds
					}
					OR = {
						has_tradition = trp_discovery_exploration_c
						has_tradition = trp_discovery_curiosity_c
						has_swapped_tradition = trp_discovery_curiosity_c_machine
						has_swapped_tradition = trp_discovery_curiosity_c_hive
					}
				}
			}
		immediate = {	
			add_tradition = trp_discovery_finish
		}
	}

country_event = { ##Tradition Production Finisher Check
	id = trp_setup_event.12
	hide_window = yes
	is_triggered_only = yes
		
		trigger = {
				AND = {
					NOT = { has_tradition = trp_production_finish }
					OR = {
						has_tradition = trp_production_excavation_c
						has_swapped_tradition = trp_production_excavation_c_gestalt
					}
					OR = {
						has_tradition = trp_production_assembly_c
						has_swapped_tradition =  trp_production_assembly_c_drone
					}
					OR = {
						has_tradition = trp_production_refinement_c
						has_swapped_tradition = trp_production_refinement_c_gestalt
					}
					OR = {
						has_tradition = trp_production_agriculture_c
						has_swapped_tradition = trp_production_agriculture_c_lithoid
						has_swapped_tradition = trp_production_agriculture_c_machine
					}
					OR = {
						has_tradition = trp_production_manufacturing_c
						has_swapped_tradition = trp_production_manufacturing_c_serv
						has_swapped_tradition = trp_production_manufacturing_c_machine
						has_swapped_tradition = trp_production_manufacturing_c_hive
						has_tradition = trp_production_fabrication_c
						has_swapped_tradition = trp_production_fabrication_c_drone
					}
				}
			}
			
		immediate = {
			add_tradition = trp_production_finish
		}
	}

country_event = { ##Tradition Commerce Finisher Check
	id = trp_setup_event.13
	hide_window = yes
	is_triggered_only = yes
	
		trigger = {
				AND = {
					NOT = { has_tradition = trp_commerce_finish }
					OR = {
						has_tradition = trp_commerce_trade_c
						has_ethic = ethic_gestalt_consciousness 
					}
					OR = {
						has_tradition = trp_commerce_security_c
						has_swapped_tradition = trp_commerce_security_c_drone
					}
					has_tradition = trp_commerce_capability_c
					OR = {
						has_swapped_tradition = trp_commerce_enterprises_c_mercenaries
						has_swapped_tradition = trp_commerce_enterprises_c_entertainment
						has_swapped_tradition = trp_commerce_enterprises_c_drone
					}
					OR = {
						has_tradition = trp_commerce_exchange_c
						has_swapped_tradition = trp_commerce_exchange_c_drone
						has_tradition = trp_commerce_accumulation_c
						has_swapped_tradition = trp_commerce_accumulation_c_drone
					}
				}
			}
			
	immediate = {
		add_tradition = trp_commerce_finish
		give_technology = { tech = megacorp_tech_trp_br_8 }
	}
}

country_event = { ##Tradition Prosperity Finisher Check
	id = trp_setup_event.14
	hide_window = yes
	is_triggered_only = yes

		trigger = {
				AND = {
					NOT = { has_tradition = trp_prosperity_finish }
					OR = {
						has_tradition = trp_prosperity_aesthetics_c
						has_swapped_tradition = trp_prosperity_aesthetics_c_hive
						has_swapped_tradition = trp_prosperity_aesthetics_c_machine
					}
					OR = {
						has_tradition = trp_prosperity_recreation_c
						has_swapped_tradition = trp_prosperity_recreation_c_hive
						has_swapped_tradition = trp_prosperity_recreation_c_machine
					}
					has_tradition = trp_prosperity_alteration_c
					OR = {
						has_tradition = trp_prosperity_renaissance_c
						has_swapped_tradition = trp_prosperity_renaissance_c_machine
						has_swapped_tradition = trp_prosperity_renaissance_c_hive
						has_swapped_tradition = trp_prosperity_renaissance_c_servitor
					}
					OR = {
						has_ethic = ethic_fanatic_xenophile
						##has_swapped_civic = civic_hive_devouring_swarm_lithoid
						has_ethic = ethic_fanatic_xenophobe 
						has_civic = civic_fanatic_purifiers 
						has_civic = civic_hive_devouring_swarm 
						has_civic = civic_machine_terminator 
						has_civic = civic_inwards_perfection 
						has_tradition = trp_prosperity_tranquillity_c
						has_tradition = trp_prosperity_control_c
					}
				}
			}
			
		immediate = {	
			add_tradition = trp_prosperity_finish
		}
 	}

country_event = { ##branch office System
	id = trp_setup_event.15
	hide_window = yes
	is_triggered_only = yes
	
	option = { ##food
		name = trp_setup_event.15.a
		trigger = {
		AND = {
			OR = {
			has_tradition = trp_production_agriculture_c
			has_swapped_tradition = trp_production_agriculture_c_lithoid
			}
			NOT = { has_technology = megacorp_tech_trp_br_1 }
		}
	}
		give_technology = { tech = megacorp_tech_trp_br_1 }
	}
	option = { ##mine
		name = trp_setup_event.15.b
		trigger = {
		AND = {
			has_tradition = trp_production_excavation_c
			Not = { has_technology = megacorp_tech_trp_br_2 }
			}
		}
		give_technology = { tech = megacorp_tech_trp_br_2 }
	}
	option = { ##consumer goods
		name = trp_setup_event.15.c
		trigger = {
		AND = {
			Has_tradition = trp_production_manufacturing_c
			Not = { has_technology = megacorp_tech_trp_br_3 }
			}
		}
		give_technology = { tech = megacorp_tech_trp_br_3 }
	}
	option = { ##alloy
		name = trp_setup_event.15.d
		trigger = {
		AND = {
			Has_tradition = trp_production_fabrication_c
			Not = { has_technology = megacorp_tech_trp_br_4 }
		}
	}
		give_technology = { tech = megacorp_tech_trp_br_4 }
	}
	option = { ##unity
		name = trp_setup_event.15.e
		trigger = {
			AND = {
				OR = {
			has_tradition = tr_diplomacy_the_federation
			has_tradition = trp_diplomacy_government_c
			}
			NOT = { has_technology = megacorp_tech_trp_br_5 }
		}
	}
		give_technology = { tech = megacorp_tech_trp_br_5 }
	}
	option = { ##science
		name = trp_setup_event.15.f
		trigger = {
		AND = {
			OR = {
				Has_tradition = trp_discovery_curiosity_c
				Has_tradition = trp_discovery_exploration_c
			}
			Not = { has_technology = megacorp_tech_trp_br_6 }
		}
	}
		give_technology = { tech = megacorp_tech_trp_br_6 }
	}
	option = { ##amusement
		name = trp_setup_event.15.g
		trigger = {
		AND = {
			has_tradition = trp_commerce_capability_c
			Not = { has_technology = megacorp_tech_trp_br_7 }
			}
		}
		give_technology = { tech = megacorp_tech_trp_br_7 }
	}
	option = { ##priest
		name = trp_setup_event.15.i
		trigger = {
		AND = {
			OR = {
			has_tradition = trp_prosperity_renaissance_c
			has_swapped_tradition = trp_prosperity_renaissance_c_spirit
			has_swapped_tradition =trp_prosperity_renaissance_c_necroid
			}
			Not = { has_technology = megacorp_tech_trp_br_9 }
			}
		}
		give_technology = { tech = megacorp_tech_trp_br_9 }
	}
}